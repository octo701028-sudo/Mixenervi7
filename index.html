
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enervi7 PWA（完整版）</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#fff; padding:20px; }
    .slider-box { margin: 10px 0; }
    input[type=range] { width: 70%; }
    .value { background:#6a0dad; padding:2px 8px; border-radius:6px; margin-left:8px; }
    .card { background:#222; border-radius:10px; padding:15px; margin:10px 0; }
    .flag { font-weight:bold; }
  </style>
</head>
<body>
  <h1>Enervi7 PWA（完整版）</h1>
  <p>量表：0 = 完全不符合 ／ 10 = 非常符合</p>

  <div id="questions"></div>
  <button onclick="generate()">生成能量圖</button>

  <h2>七階資訊卡</h2>
  <div id="cards"></div>

  <script>
    const questions = [
      "我能清楚覺察自己此刻的身心狀態。",
      "我能在混亂時，迅速把注意力帶回當下。",
      "面對壓力或衝突時，我能保持冷靜不失衡。",
      "我能有效地釋放累積的負面情緒與雜念。",
      "我常感覺靈感／情感在體內自然流動。",
      "我能順勢調整步調，不僵硬或卡住。",
      "做決定時，我能堅定地選擇對自己真的好的事。",
      "遇到挑戰，我仍能相信自己並往前一步。",
      "我能真誠表達，也樂於傾聽他人。",
      "我能感到自己與他人、與世界是連結的。",
      "我信任直覺，且能從中獲得有用的指引。",
      "我能從日常事件看見更深的洞見與意義。",
      "我能把過去的經驗整合成力量，而不是枷鎖。",
      "我常感到自己完整、對生命方向踏實安心。"
    ];

    const stageNames = ["白｜能量覺知","藍｜穩定與淨化","橙｜能量流動","黃｜內在力量","綠｜共振與連結","靛藍｜意識擴展","紫｜靈魂整合"];

    window.onload = ()=>{
      let qDiv = document.getElementById("questions");
      questions.forEach((q,i)=>{
        qDiv.innerHTML += `
          <div class="slider-box">
            <label>${i+1}. ${q}</label><br>
            <input type="range" min="0" max="10" value="0" id="q${i}" oninput="document.getElementById('v${i}').innerText=this.value">
            <span class="value" id="v${i}">0</span>
          </div>`;
      });
    }

    function generate(){
      let scores = [0,0,0,0,0,0,0];
      for(let i=0;i<14;i++){
        let v = parseInt(document.getElementById("q"+i).value);
        let group = Math.floor(i/2); // 每2題屬於同一階
        scores[group]+=v;
      }
      let cardsDiv = document.getElementById("cards");
      cardsDiv.innerHTML = "";
      scores.forEach((s,i)=>{
        let avg = Math.round(s/2);
        let flag="", advice="";
        if(avg<=3){ flag="補給"; advice="狀態偏低，請多補充能量，注意休息與支持。"; }
        else if(avg<=6){ flag="觀照"; advice="保持覺察，留意情緒與身心的流動，維持平衡。"; }
        else { flag="優勢"; advice="狀態良好，嘗試擴展影響力，並將能量分享給他人。"; }

        cardsDiv.innerHTML += `
          <div class="card">
            <h3>${stageNames[i]}｜平均 ${avg} 分 <span class="flag">（${flag}）</span></h3>
            <p>${advice}</p>
          </div>`;
      });
    }
  </script>
</body>
</html>
